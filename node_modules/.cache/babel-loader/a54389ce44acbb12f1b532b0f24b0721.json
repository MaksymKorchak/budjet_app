{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport { STATUSES } from './constants';\nimport { getItems, addItem, deleteItem, updateItem } from './utils/indexdb';\nexport const useBooleanToggle = function () {\n  _s();\n  let initialStatus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  const [status, setStatus] = useState(initialStatus);\n  const handleStatus = () => setStatus(currentStatus => !currentStatus);\n  return {\n    status,\n    handleStatus\n  };\n};\n_s(useBooleanToggle, \"gqeGt53fFnV+w5ATWNQzDmB/auw=\");\nexport const useData = () => {\n  _s2();\n  const [state, setState] = useState({\n    transactions: [],\n    error: '',\n    status: STATUSES.IDLE\n  });\n  useEffect(() => {\n    setState({\n      ...state,\n      status: STATUSES.PENDING\n    });\n    getItems().then(transactions => {\n      setState({\n        ...state,\n        transactions,\n        status: STATUSES.SUCCESS\n      });\n    }).catch(e => {\n      setState({\n        ...state,\n        transactions: [],\n        status: STATUSES.ERROR,\n        error: e\n      });\n    });\n  }, []);\n  const pushTransaction = data => {\n    const transaction = {\n      ...data,\n      value: +data.value,\n      id: Date.now()\n    };\n    setState({\n      ...state,\n      transactions: [transaction, ...state.transactions]\n    });\n    addItem(transaction);\n  };\n  const onDelete = useCallback(id => {\n    setState(state => ({\n      ...state,\n      transactions: state.transactions.filter(transaction => transaction.id !== id)\n    }));\n    deleteItem(id);\n  }, [setState]);\n  const onStarClick = useCallback(id => {\n    const item = state.transactions.find(i => i.id === id);\n    updateItem({\n      ...item,\n      isStarred: !item.isStarred\n    }).then(() => {\n      setState(state => ({\n        ...state,\n        transactions: state.transactions.map(item => item.id !== id ? item : {\n          ...item,\n          isStarred: !item.isStarred\n        })\n      }));\n    });\n  }, [setState]);\n  return {\n    ...state,\n    pushTransaction,\n    onDelete,\n    onStarClick\n  };\n};\n_s2(useData, \"UQy6ArML4e7v3TvO7cAF2z1ONpM=\");","map":{"version":3,"names":["useState","useEffect","useCallback","STATUSES","getItems","addItem","deleteItem","updateItem","useBooleanToggle","initialStatus","status","setStatus","handleStatus","currentStatus","useData","state","setState","transactions","error","IDLE","PENDING","then","SUCCESS","catch","e","ERROR","pushTransaction","data","transaction","value","id","Date","now","onDelete","filter","onStarClick","item","find","i","isStarred","map"],"sources":["/Users/maksym/Desktop/budjet_app/src/hooks.js"],"sourcesContent":["import { useState,useEffect,useCallback } from 'react';\nimport { STATUSES } from './constants';\nimport { getItems, addItem, deleteItem,updateItem } from './utils/indexdb';\n\nexport const useBooleanToggle = (initialStatus = false) => {\n    const [status, setStatus] = useState(initialStatus);\n\n    const handleStatus = () => setStatus((currentStatus) => !currentStatus);\n\n    return {\n        status,\n        handleStatus\n    }\n};\n\nexport const useData = () => {\n    const [state, setState] = useState({\n        transactions: [],\n        error: '',\n        status: STATUSES.IDLE\n    });\n\n    useEffect(() => {\n        setState({\n            ...state,\n            status: STATUSES.PENDING\n        })\n\n        getItems().then((transactions) => {\n            setState({\n                ...state,\n                transactions,\n                status: STATUSES.SUCCESS\n            }); \n        }).catch((e) => {\n            setState({\n                ...state,\n                transactions: [],\n                status: STATUSES.ERROR,\n                error: e\n            });\n        })\n    },[])\n\n    const pushTransaction = (data) => {\n        const transaction = {\n            ...data,\n            value: +data.value,\n            id: Date.now()\n        }\n        setState({\n            ...state,\n            transactions: [transaction, ...state.transactions]\n        })\n\n        addItem(transaction);\n    }\n\n    const onDelete = useCallback((id) => {\n        setState((state) => ({\n            ...state,\n            transactions: state.transactions.filter((transaction) => transaction.id !== id)\n        }));\n        deleteItem(id);\n    },[setState]);\n\n    const onStarClick = useCallback((id) => {\n        const item = state.transactions.find((i) => i.id === id);\n\n        updateItem({\n            ...item,\n            isStarred: !item.isStarred\n        }).then(() => {\n            setState((state) => ({\n                ...state,\n                transactions: state.transactions.map((item) => item.id !== id ? item : {\n                    ...item,\n                    isStarred: !item.isStarred\n                })\n            }))\n        })\n    },[setState]);\n\n    return {\n        ...state,\n        pushTransaction,\n        onDelete,\n        onStarClick\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}